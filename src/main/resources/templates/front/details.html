<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<!---css--->
<link href="/front/css/bootstrap.css" rel='stylesheet' type='text/css' />
<link href="/front/css/style.css" rel='stylesheet' type='text/css' />
<link href="/front/css/popuo-box.css" rel='stylesheet' type='text/css' />
<!---css--->
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="keywords" content="Real Space Responsive web template, Bootstrap Web Templates, Flat Web Templates, Android Compatible web template,
Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyEricsson, Motorola web design" />
<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
<!---js--->
<script src="/front/js/jquery-1.11.1.min.js"></script>
<script src="/front/js/bootstrap.js"></script>
<script src="/front/js/jquery.magnific-popup.js"></script>
<!---js--->
<!---fonts-->
<link href='/front/css/google1.css' rel='stylesheet' type='text/css'>
<link href='/front/css/google2.css' type='text/css'>
<link href='/front/css/google3.css' rel='stylesheet' type='text/css'>
<!---fonts-->
<!-- FlexSlider -->
<script src="/front/js/jquery.flexslider.js"></script>
<link rel="stylesheet" href="/front/css/flexslider.css" type="text/css" media="screen" />
<script>
    // Can also be used with $(document).ready()
    $(window).load(function() {
        $('.flexslider').flexslider({
            animation: "slide",
            controlNav: "thumbnails"
        });
    });
</script>
<!-- //FlexSlider-->
</head>
<body>

    <!---header--->
    <div th:replace="front/commons/header"></div>
    <!---header--->
    <!---banner--->
    <div class="banner-section">
        <div class="container">
            <h2>详细信息</h2>
        </div>
    </div>
    <!---banner--->
    <div class="content">
        <div class="properties-section">
            <div class="container">
                <div class="properties-grids">
                <div class="col-md-9 properties-left">
                    <div class="flexslider">
                        <ul class="slides">
                            <li th:data-thumb="'/path/img/'+${house.houseImgList[0].name}">
                                <div class="thumb-image"> <img th:src="'/path/img/'+${house.houseImgList[0].name}" data-imagezoom="true" class="img-responsive"> </div>
                            </li>
                            <li th:data-thumb="'/path/img/'+${house.houseImgList[1].name}">
                                 <div class="thumb-image"> <img th:src="'/path/img/'+${house.houseImgList[1].name}" data-imagezoom="true" class="img-responsive"> </div>
                            </li>
                            <li th:data-thumb="'/path/img/'+${house.houseImgList[2].name}">
                                 <div class="thumb-image"> <img th:src="'/path/img/'+${house.houseImgList[2].name}" data-imagezoom="true" class="img-responsive"> </div>
                            </li>
                            <li th:data-thumb="'/path/img/'+${house.houseImgList[3].name}">
                                 <div class="thumb-image"> <img th:src="'/path/img/'+${house.houseImgList[3].name}" data-imagezoom="true" class="img-responsive"> </div>
                            </li>
                        </ul>
                    </div>
                    <div class="clearfix"></div>
                    <div class="properties-details">
                        <div class="col-md-2 properties-detail">
                            <h5>[[${house.name}]]每月</h5>
                        </div>
                        <div class="col-md-2 properties-detail">
                            <h5>￥[[${house.price}]]每月</h5>
                        </div>
                        <div class="col-md-2 properties-detail">
                            <h5>[[${house.apartment}]]</h5>
                        </div>
                        <div class="col-md-2 properties-detail">
                            <h5>[[${house.size}]]m²</h5>
                        </div>
                        <div class="col-md-2 properties-detail">
                            <a href="javascript:window.print()"> 打印信息</a>
                        </div>
                        <div th:if="${hasCollected}=='false'" class="col-md-2 properties-detail">
                            <button type="button" class="btn btn-default" th:onclick="|collect(${house.id})|">
                                <span id="collect_span" class="glyphicon glyphicon glyphicon-star-empty" aria-hidden="true"></span>
                                <label id="collect_label">收藏</label>
                            </button>
                        </div>
                        <div th:if="${hasCollected}=='true'" class="col-md-2 properties-detail">
                            <button type="button" class="btn btn-default" th:onclick="|collect(${house.id})|">
                                <span id="collect_span" class="glyphicon glyphicon glyphicon-star" aria-hidden="true"></span>
                                <label id="collect_label">取消收藏</label>
                            </button>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                    <p>[[${house.profile}]]</p>
                    <div class="additional-details">
                        <h3>额外信息</h3>
                        <ul>
                            <li><span>地铁线</span> :[[${house.subwayline}]]号线</li>
                            <li><span>出租方式</span> :[[${house.mode}]]</li>
                            <li><span>朝向</span> :[[${house.orientation}]]</li>
                            <li><span>特色</span> :[[${house.item}]]</li>
                            <li><span>租期</span> :[[${house.term}]]</li>
                        </ul>
                    </div>
                    <div th:if="${house.video}!='no'" class="video" style="margin-top: 20px">
                        <h4>房间视频</h4>
                        <video width="640" height="380" controls="controls">
                            <source th:src="'/path/video/'+${house.video}" type="video/mp4" />
                            你的浏览器不支持视频播放
                        </video>
                    </div>
                    <div class="note">
                        <h4>评论区</h4>
                        <p>暂无评论</p>
                    </div>
                    <!--popupbox-->
                    <script src="/front/js/jquery.magnific-popup.js" type="text/javascript"></script>
                    <!--popupbox-->
                    <div id="small-dialog" class="mfp-hide">
                    </div>
                     <script>
                            $(document).ready(function() {
                            $('.popup-with-zoom-anim').magnificPopup({
                                type: 'inline',
                                fixedContentPos: false,
                                fixedBgPos: true,
                                overflowY: 'auto',
                                closeBtnInside: true,
                                preloader: false,
                                midClick: true,
                                removalDelay: 300,
                                mainClass: 'my-mfp-zoom-in'
                            });

                            });
                    </script>
                </div>
                <div class="col-md-3 properties-right">
                    <div class="properties-top">
                        <h4>房东:[[${owner.username}]]</h4>
                        <img th:src="'/path/avatar/'+${owner.avatar}" class="img-responsive" alt=""/>
                        <ul class="">
                            <li><i class="glyphicon glyphicon-earphone" aria-hidden="true"></i>手机 : [[${owner.phone}]]</li>
                            <li><i class="glyphicon glyphicon-phone" aria-hidden="true"></i> email : [[${owner.email}]]</li>
                        </ul>
                        <p><span>个人简介: </span>[[${owner.profile}]]</p>
                        <a th:href="@{/back/chat(receiverName=${owner.username})}" class="button2">在线联系</a>
                </div>
                <div class="clearfix"></div>
            </div>
            </div>
            </div>
        </div>
    </div>

    <!---footer--->
    <div th:replace="front/commons/footer"></div>
    <!---footer--->

    <script type="text/javascript">
        function collect(id) {
            if($("#collect_label").html()=="收藏"){
                $.ajax({
                    url:"/collect",
                    method:'post',
                    data:"id="+id,
                    success:function (data) {
                        if(data==200){
                            $("#collect_span").attr("class","glyphicon glyphicon glyphicon-star");
                            $("#collect_label").html("取消收藏")
                        }

                    }
                })
            }
            else if($("#collect_label").html()=="取消收藏"){
                $.ajax({
                    url:"/cancelCollect",
                    method:'post',
                    data:"id="+id,
                    success:function (data) {
                        if(data==200){
                            $("#collect_span").attr("class","glyphicon glyphicon glyphicon-star-empty");
                            $("#collect_label").html("收藏")
                        }
                    }
                })
            }
        }
    </script>
</body>
</html>